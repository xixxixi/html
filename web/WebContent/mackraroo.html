<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let json = [{
                id: 1,
                first_name: "Noak",
                last_name: "Abilowitz",
                email: "nabilowitz0@ezinearticles.com",
                gender: "Non-binary",
                ip_address: "92.152.241.35"
            },
            {
                id: 2,
                first_name: "Justen",
                last_name: "Klemmt",
                email: "jklemmt1@theguardian.com",
                gender: "Bigender",
                ip_address: "208.28.135.88"
            },
            {
                id: 3,
                first_name: "Isidor",
                last_name: "Perott",
                email: "iperott2@cbsnews.com",
                gender: "Polygender",
                ip_address: "167.43.98.39"
            },
            {
                id: 4,
                first_name: "Austin",
                last_name: "Cattini",
                email: "acattini3@google.com.br",
                gender: "Agender",
                ip_address: "171.204.249.112"
            },
            {
                id: 5,
                first_name: "Jud",
                last_name: "Scoular",
                email: "jscoular4@surveymonkey.com",
                gender: "Female",
                ip_address: "197.239.18.207"
            },
            {
                id: 6,
                first_name: "Izak",
                last_name: "Algore",
                email: "ialgore5@unblog.fr",
                gender: "Agender",
                ip_address: "102.120.72.206"
            }
        ];

        // 선택  아이디 이름        성       이메일    성별    삭제
        // check, id, first_name, last_name, email, gender, button
        // 표시할 항목 관련 object
        let titles = {
            id: '아이디',
            first_name: '이름',
            lsat_name: '성',
            email: '이메일',
            gender: '성별',
        }

        let tr, th, text, tbl, chkbox, button;
        let bdy = document.getElementsByTagName('body');
        tbl = document.createElement('table');
        bdy[0].appendChild(tbl);
        // tbl = document.getElementById('tbl');
        tbl.setAttribute('id', 'tbl');
        tbl.setAttribute('border', '1');
        // 타이틀
        tr = document.createElement('tr');
        tbl.appendChild(tr);
        // 체크박스 생성
        chkbox = document.createElement('input');
        chkbox.setAttribute('type', 'checkbox');
        chkbox.onchange = allCheck;
        td = document.createElement('th');
        td.appendChild(chkbox);
        tr.appendChild(td);
        for (title in titles) {
            th = document.createElement('th');
            text = document.createTextNode(titles[title]);
            th.appendChild(text);
            tr.appendChild(th);
        }
        // button 생성
        btn = document.createElement('input');
        btn.setAttribute('type', 'button');
        btn.setAttribute('value', 'Select Del');
        btn.onclick = delSelected;
        td = document.createElement('th');
        td.appendChild(btn);
        tr.appendChild(td);

        // 데이터 항목
        for (data of json) {
            tr = document.createElement('tr');
            chkbox = document.createElement('input');
            chkbox.setAttribute('type', 'checkbox');
            td = document.createElement('td');
            td.appendChild(chkbox);
            tr.appendChild(td);
            for (field in titles) {
                td = document.createElement('td');
                text = document.createTextNode(data[field]);
                td.appendChild(text);
                tr.appendChild(td);
            }
            // 버튼 항목 추가
            btn = document.createElement('input');
            btn.setAttribute('type', 'button');
            btn.setAttribute('value', 'del');
            btn.onclick = delFunc;
            td = document.createElement('td');
            td.appendChild(btn);
            tr.appendChild(td);

            tbl.appendChild(tr);
        }

        // 한건 지우기
        function delFunc() {
            console.log(this.parentNode.parentNode.remove());
        }

        // 전체 선택
        function allCheck() {
            let tChk = document.querySelector('th>input[type="checkbox"]');
            let checks = document.querySelectorAll('td>input[type="checkbox"]');
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = tChk.checked;
            }
        }
        // 선택 지우기
        function delSelected(){
            let checkedAll = document.querySelectorAll('td>input[type="checkbox"]:checked');
            console.log(checkedAll);
            for(let i = 0; i < checkedAll.length; i++){
                checkedAll[i].parentNode.parentNode.remove();
            }
        }
    </script>
</body>

</html>